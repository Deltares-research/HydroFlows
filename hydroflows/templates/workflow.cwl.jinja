{% from "macros.cwl.jinja" import add_step%}
# This file was generated by hydroflows version {{ version }}

cwlVersion: v1.2
class: Workflow

requirements:
    ScatterFeatureRequirement: {}
    SubworkflowFeatureRequirement: {}

inputs:
    {% for key,value in inputs.items()%}
    {{key}}: {{value.type}}
    {% endfor %}

outputs:
{% for id,info in workflow.output.items()%}
    {{id}}:
{% if "[][]" in info.type%}
        type:
            type: array
            items:
                type: array
                items: {{info.type.replace("[][]","")}}
{% else %}
        type: {{info.type}}
{% endif %}
        outputSource: {{info.outputSource}}
{% endfor%}

steps:
{%+ for step in workflow.steps%}
{% with step=step %}
    {{ add_step(step, dryrun) }}
{% endwith %}
{% endfor %}

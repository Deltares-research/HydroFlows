# This file was generated by hydroflows version {{ version }}

cwlVersion: v1.2
class: CommandLineTool

requirements:
    InlineJavascriptRequirement: {}
    InitialWorkDirRequirement:
        listing:
        {% for key, value in rule.input.items()%}
        {% if "File" is in value.type or "Directory" is in value.type %}
        - $(inputs.{{key}})
        {% endif %}
        {% endfor %}

baseCommand: ["hydroflows", "method", "{{rule.method_name}}"]

inputs:
    {% for key,value in rule.input.items() %}
    {{key}}:
        type: {{value.type}}
        inputBinding:
            prefix: {{key}}=
            separate: false
            {% if value.separator %}
            itemSeparator: {{value.separator}}
            {% endif %}
    {% endfor %}
    {% if rule.input_wildcards %}
    {{rule.input_wildcards}}:
        type: string
    {% endif %}
    dryrun:
        type: boolean
        inputBinding:
            prefix: --dryrun
            position: 1
        default: false

outputs:
    {% for key,value in rule.output.items()%}
    {{key}}:
        type: {{value.type}}
        outputBinding:
            glob:
            {% for item in value.value%}
            - "{{item}}"
            {% endfor %}
            outputEval: |
                ${
                    {% for item in value.value%}
                    self[{{loop.index0}}].basename = "{{item}}";
                    {% endfor %}
                    return self
                }
    {% endfor %}
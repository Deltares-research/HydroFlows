config:
  sfincs_exe: bin/sfincs/sfincs.exe
  region: data/test_region.geojson
  rps: [5, 10, 50]

rules:
  - method: sfincs_build
    kwargs:
      region: $config.region
  - method: get_ERA5_rainfall
    kwargs:
      region: $rules.sfincs_build.output.sfincs_region
  - method: pluvial_design_events
    kwargs:
      precip_nc: $rules.get_ERA5_rainfall.output.precip_nc
      rps: $config.rps
  - method: sfincs_update_forcing
    kwargs:
      sfincs_inp: $rules.sfincs_build.output.sfincs_inp
      event_yaml: $rules.pluvial_design_events.output.event_yaml
  - method: sfincs_run
    kwargs:
      sfincs_inp: $rules.sfincs_update_forcing.output.sfincs_out_inp
      sfincs_exe: $config.sfincs_exe
  - method: sfincs_postprocess
    kwargs:
      sfincs_map: $rules.sfincs_run.output.sfincs_map
